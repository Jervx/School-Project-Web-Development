let accounts = new Array(); function initAccount(){ if(stor_get("cur_user") != null){ alert("You Are Already Login!"); window.history.back(); } accounts = JSON.parse(stor_get("accounts")); if(accounts == null){ alert("Look Like No Accounts Yet on our Database. Create Now"); window.location = "signup.html"; } } function login() { let username = document.getElementById("form-username").value; let password = document.getElementById("form-password").value; var indx = findUsername(username); if(indx == -1){ alert("User "+username+" does not exist"); return; } var usr = accounts[indx]; if(usr.password == password){ stor_add("cur_user",JSON.stringify(usr)); if(stor_get("link_req") != null){ let reqlink = stor_get("link_req"); stor_rem("link_req"); window.location = reqlink; } else window.location = "index.html"; }else{ alert("Invalid Password"); } } function findUsername(username) { for (x = 0; x < accounts.length; x++){ console.log(accounts[x].username + " => " + username); if (username === accounts[x].username){ return x; } } console.log("not found"); return -1; } 
